<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Security Headers -->
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<meta name="Content-Security-Policy"
      content="default-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com;
               script-src 'self';
               style-src 'self' https://fonts.googleapis.com;
               font-src https://fonts.gstatic.com;">

<title>{{ page.title }} - {{ site.title }}</title>

<!-- Prevent Flash of User Theme -->
<script>
  const savedFontSize = localStorage.getItem('fontSize');
  const savedSpacing = localStorage.getItem('spacing');
  const savedThemeColor = localStorage.getItem('themeColor');
  const savedTheme = localStorage.getItem('theme');

  if (savedFontSize) document.documentElement.style.fontSize = savedFontSize + 'px';
  if (savedSpacing) document.documentElement.style.setProperty('--spacing-md', savedSpacing + 'rem');
  if (savedThemeColor) document.documentElement.style.setProperty('--color-primary', savedThemeColor);
  if (savedTheme) document.documentElement.setAttribute('data-theme', savedTheme);
</script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Raleway:wght@400;500;700&display=swap" rel="stylesheet">

<!-- Styles -->
<link rel="stylesheet" href="{{ '/assets/css/variables.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/sidebar.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/calendar.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/serivces.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/donations.css' | relative_url }}">

</head>

<body>

<a href="#main-content" class="skip-link">Skip to main content</a>

<div class="site-wrapper">

  <!-- Sidebar -->
  <aside class="sidebar" data-sidebar aria-hidden="true">

    <div class="sidebar__header">
      <h1 class="sidebar__title">Navigation</h1>
    </div>

    <nav aria-label="Main navigation">
      <ul class="sidebar__nav">
        <li><a href="{{ '/' | relative_url }}" class="sidebar__nav-link">Home</a></li>
        <li><a href="{{ '/calendar' | relative_url }}" class="sidebar__nav-link">Calendar</a></li>
        <li><a href="{{ '/about' | relative_url }}" class="sidebar__nav-link">About</a></li>
        <li><a href="{{ '/services' | relative_url }}" class="sidebar__nav-link">Services</a></li>
        <li><a href="{{ '/donations' | relative_url }}" class="sidebar__nav-link">Donations</a></li>
        
      </ul>
    </nav>

    <!-- Accessibility Controls -->
    <section class="sidebar__section">
      <h2 class="sidebar__section-title">Accessibility</h2>
      <div class="accessibility-controls">

        <div class="control-group">
          <label for="font-size">Font Size</label>
          <input type="range" id="font-size" min="10" max="30" value="16">
        </div>

        <div class="control-group">
          <label for="spacing">Spacing</label>
          <input type="range" id="spacing" min="0.5" max="1.2" step="0.1" value="1">
        </div>

        <div class="control-group">
          <label for="theme-color">Theme Color</label>
          <input type="color" id="theme-color" value="#8e44ad">
        </div>

        <div class="control-group">
          <label for="theme-toggle">Dark Mode</label>
          <button id="theme-toggle" class="theme-toggle">Toggle</button>
        </div>

      </div>
    </section>

  </aside>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" data-sidebar-overlay></div>

  <!-- Header include -->
  {% include header.html %}

  <!-- Main content -->
  <main id="main-content" class="content">
    <div class="container">
      {{ content }}
    </div>
  </main>

  <!-- Footer include -->
  {% include footer.html %}

</div>

<!-- Scripts -->
<script src="{{ '/assets/js/menu.js' | relative_url }}" defer></script>
{% if page.layout == 'calendar' %}
<script src="{{ '/assets/js/calendar.js' | relative_url }}" defer></script>
{% endif %}
{% if page.layout == 'services' %}
<script src="{{ '/assets/js/services.js' | relative_url }}" defer></script>
{% endif %}
{% if page.layout == 'donations' %}
<script src="{{ '/assets/js/donations.js' | relative_url }}" defer></script>
{% endif %}
<script src="{{ '/assets/js/app.js' | relative_url }}" defer></script>
<script src="{{ '/assets/js/accessibility.js' | relative_url }}" defer></script>
<script src="{{ '/assets/js/security.js' | relative_url }}" defer></script>
      
</body>
</html>
